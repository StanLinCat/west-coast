{{/* Hugo Blox: Manual List Block - 精確 768px 內容寬度（與 collection 完全一致） */}}
{{ $page := .wcPage }}
{{ $block := .wcBlock }}

{{ $items := $block.content.items }}

<!-- 標題區：外層 max-w-3xl + px-6 → 內容 768px -->
{{ if $block.content.title }}
<div class="mx-auto max-w-3xl px-6">
  <div class="mb-6 text-center">
    <h2 class="text-3xl font-bold text-gray-900 dark:text-white">
      {{ $block.content.title | emojify | $page.RenderString }}
    </h2>
  </div>
  {{ with $block.content.text }}
  <p class="text-center text-gray-600 dark:text-gray-400">
    {{ . | emojify | $page.RenderString }}
  </p>
  {{ end }}
</div>
{{ end }}

<!-- 列表內容：外層 max-w-3xl + px-6，內層「不加 px-6」→ 內容 768px -->
<div class="mx-auto max-w-3xl px-6">
  <div class="space-y-8">
    {{ range $items }}
      {{ $title := .title }}
      {{ $summary := .summary | default "" }}
      {{ $summary = $summary | page.RenderString }}
      {{ $date := .date | default now }}
      {{ $external_link := .external_link }}
      {{ $link := cond (ne $external_link "") $external_link "#" }}

      <article class="md:grid md:grid-cols-4 md:items-baseline">
        <div class="md:col-span-3 group relative flex flex-col items-start">
          <h2 class="text-base font-semibold tracking-tight text-zinc-800 dark:text-zinc-100">
            <div class="absolute -inset-x-4 -inset-y-6 z-0 scale-95 bg-zinc-50 opacity-0 transition group-hover:scale-100 group-hover:opacity-100 dark:bg-zinc-800/50 sm:-inset-x-6 sm:rounded-2xl"></div>
            <a href="{{ $link }}" {{ if $external_link }}target="_blank" rel="noopener"{{ end }}>
              <span class="absolute -inset-x-4 -inset-y-6 z-20 sm:-inset-x-6 sm:rounded-2xl"></span>
              <span class="relative z-10">{{ $title }}</span>
            </a>
          </h2>

          <!-- Mobile Date -->
          <time class="md:hidden relative z-10 order-first mb-3 flex items-center text-sm text-zinc-400 dark:text-zinc-500 pl-1"
                datetime="{{ time.Format "2006-01-02" $date }}">
            {{ time.Format (site.Params.locale.date_format | default ":date_long") $date }}
          </time>

          <!-- Summary -->
          <p class="relative z-10 mt-2 text-sm text-zinc-600 dark:text-zinc-400">
            {{ $summary }}
          </p>

          <!-- Read More -->
          <a href="{{ $link }}" {{ if $external_link }}target="_blank" rel="noopener"{{ end }}
             class="relative z-10 mt-4 flex items-center text-sm font-medium text-primary-500">
            {{ T "read_more" | default "Read more" }}
            <svg aria-hidden="true" class="ml-1 h-4 w-4 stroke-current" fill="none" viewBox="0 0 16 16">
              <path d="M6.75 5.75 9.25 8l-2.5 2.25" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></path>
            </svg>
          </a>
        </div>

        <!-- Desktop Date -->
        <time class="mt-1 hidden md:block relative z-10 order-first mb-3 flex items-center text-sm text-zinc-400 dark:text-zinc-500"
              datetime="{{ time.Format "2006-01-02" $date }}">
          {{ time.Format (site.Params.locale.date_format | default ":date_long") $date }}
        </time>
      </article>
    {{ end }}
  </div>
</div>